(function(e){e.fn.popupBox=function(t,n){function u(){e("<style>").text("#page-cover { position: fixed;top: 0px; left: 0px; height: 100%; width: 100%; background-color: #000; opacity: 0.4; filter: alpha(opacity=40); z-index: 900; }").appendTo("head");s=e("<div id='page-cover'>").appendTo("body")}event.preventDefault();event.stopPropagation();var r=e(event["currentTarget"]);var i=e(this);var s=null;var o=null;this.defaults={cover:false,effect:"slideToggle"};this.options=t;this.settings=e.extend({},this.defaults,this.options);o=this.settings;(function(){var t=e(window).width();var n=e(window).height();var r=i.outerWidth();var s=i.outerHeight();var o=(t-r)/2;var u=(n-s)/2;i.css({left:o+"px",top:u+"px",position:"fixed","z-index":1e3})})();if(this.settings.cover==true)u();(effect=function(e){switch(o.effect){case"slideToggle":if(!e)i.slideToggle();else i.slideUp();break;case"toggle":if(!e)i.toggle();else i.hide();break;default:if(!e)i.slideToggle();else i.slideUp()}})(false);e("html").click(function(){effect(true);if(o.cover==true)s.remove()});e(i,r).click(function(e){e.stopPropagation()});if(n)n()}})(jQuery)