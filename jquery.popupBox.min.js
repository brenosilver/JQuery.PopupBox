(function(e){e.fn.popupBox=function(t,n){var r=this;t.init=function(){function a(){e("<style>").text("#page-cover {position: fixed; top: 0px; left: 0px; height: 100%; width: 100%;}").appendTo("head");s=e("<div id='page-cover'>").appendTo("body");var t="alpha(opacity="+o.coverStyle.opacity*100+")";s.css({"background-color":o.coverStyle.color,opacity:o.coverStyle.opacity,filter:t,"z-index":o.coverStyle.zIndex})}function f(){if(!u)o.onHide()}var i=t;var s=null;var o=null;var u=false;this.defaults={cover:false,effect:"slideToggle",duration:400,coverStyle:{color:"#000",opacity:.4,zIndex:900},boxStyle:{left:null,right:null,bottom:null,top:null,position:"fixed",zIndex:905},onHide:function(){},onFinish:function(){}};this.options=n;this.settings=e.extend({},this.defaults,this.options);if(this.options){this.settings.coverStyle=e.extend({},this.defaults.coverStyle,this.options.coverStyle);this.settings.boxStyle=e.extend({},this.defaults.boxStyle,this.options.boxStyle)}o=this.settings;(function(){var t=e(window).width();var n=e(window).height();var r=i.outerWidth(true);var s=i.outerHeight(true);var u=Math.floor((t-r)/2);var a=Math.floor((n-s)/2);i.css({left:o.boxStyle.left===null?u+"px":o.boxStyle.left,top:o.boxStyle.top===null?a+"px":o.boxStyle.top,position:o.boxStyle.position,"z-index":o.boxStyle.zIndex,bottom:o.boxStyle.bottom===null?"none":o.boxStyle.bottom,right:o.boxStyle.right===null?"none":o.boxStyle.right})})();if(this.settings.cover==true)a();(effect=function(e){switch(o.effect){case"slideToggle":if(!e)i.slideToggle(o.duration);else i.slideUp(o.duration);break;case"toggle":if(!e)i.toggle();else i.hide();break;case"fadeToggle":if(!e)i.fadeToggle(o.duration);else i.fadeOut(o.duration);break;default:if(!e)i.slideToggle(o.duration);else i.slideUp(o.duration)}})(false);e("html").click(function(){effect(true);if(o.cover==true)s.remove();f();u=true});e(i,r).click(function(e){e.stopPropagation()});this.settings.onFinish()};e(this).click(function(e){e.preventDefault();e.stopPropagation();t.init()})}})(jQuery)