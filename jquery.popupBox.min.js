(function(e){e.fn.popupBox=function(t){function u(){e("<style>").text("#page-cover {position: fixed; top: 0px; left: 0px; height: 100%; width: 100%;}").appendTo("head");i=e("<div id='page-cover'>").appendTo("body");var t="alpha(opacity="+s.coverStyle.opacity*100+")";i.css({"background-color":s.coverStyle.color,opacity:s.coverStyle.opacity,filter:t,"z-index":s.coverStyle.zIndex})}function a(){if(!o&&s.onHide)s.onHide()}event.preventDefault();event.stopPropagation();var n=e(event["currentTarget"]);var r=e(this);var i=null;var s=null;var o=false;this.defaults={cover:false,effect:"slideToggle",duration:400,coverStyle:{color:"#000",opacity:.4,zIndex:900},boxStyle:{left:null,right:null,bottom:null,top:null,position:"fixed",zIndex:905},onHide:null,onFinish:null};this.options=t;this.settings=e.extend({},this.defaults,this.options);this.settings.coverStyle=e.extend({},this.defaults.coverStyle,this.options.coverStyle);this.settings.boxStyle=e.extend({},this.defaults.boxStyle,this.options.boxStyle);s=this.settings;(function(){var t=e(window).width();var n=e(window).height();var i=r.outerWidth();var o=r.outerHeight();var u=(t-i)/2;var a=(n-o)/2;r.css({left:s.boxStyle.left===null?u+"px":s.boxStyle.left,top:s.boxStyle.top===null?a+"px":s.boxStyle.top,position:s.boxStyle.position,"z-index":s.boxStyle.zIndex,bottom:s.boxStyle.bottom===null?"none":s.boxStyle.bottom,right:s.boxStyle.right===null?"none":s.boxStyle.right})})();if(this.settings.cover==true)u();(effect=function(e){switch(s.effect){case"slideToggle":if(!e)r.slideToggle(s.duration);else r.slideUp(s.duration);break;case"toggle":if(!e)r.toggle();else r.hide();break;case"fadeToggle":if(!e)r.fadeToggle(s.duration);else r.fadeOut(s.duration);break;default:if(!e)r.slideToggle(s.duration);else r.slideUp(s.duration)}})(false);e("html").click(function(){effect(true);if(s.cover==true)i.remove();a();o=true});e(r,n).click(function(e){e.stopPropagation()});if(this.settings.onFinish)this.settings.onFinish()}})(jQuery)