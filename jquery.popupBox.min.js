(function(e){e.fn.popupBox=function(t){function u(){e("<style>").text("#page-cover { position: fixed;top: 0px; left: 0px; height: 100%; width: 100%; background-color: #000; opacity: 0.4; filter: alpha(opacity=40); z-index: 900; }").appendTo("head");i=e("<div id='page-cover'>").appendTo("body")}function a(){if(!o&&s.onHide)s.onHide()}event.preventDefault();event.stopPropagation();var n=e(event["currentTarget"]);var r=e(this);var i=null;var s=null;var o=false;this.defaults={cover:false,effect:"slideToggle",onHide:null,onFinish:null};this.options=t;this.settings=e.extend({},this.defaults,this.options);s=this.settings;(function(){var t=e(window).width();var n=e(window).height();var i=r.outerWidth();var s=r.outerHeight();var o=(t-i)/2;var u=(n-s)/2;r.css({left:o+"px",top:u+"px",position:"fixed","z-index":1e3})})();if(this.settings.cover==true)u();(effect=function(e){switch(s.effect){case"slideToggle":if(!e)r.slideToggle();else r.slideUp();break;case"toggle":if(!e)r.toggle();else r.hide();break;default:if(!e)r.slideToggle();else r.slideUp()}})(false);e("html").click(function(){effect(true);if(s.cover==true)i.remove();a();o=true});e(r,n).click(function(e){e.stopPropagation()});if(this.settings.onFinish)this.settings.onFinish()}})(jQuery)